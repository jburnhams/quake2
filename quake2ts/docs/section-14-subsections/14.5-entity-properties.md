# Section 14.5: Entity Properties

**Priority**: P2 | **Effort**: 1 week | **Parallel**: Yes

## func_door
- **File**: `packages/game/src/entities/funcs.ts`
- **Source**: `../rerelease/g_func.cpp` SP_func_door
- [x] Add `lip` property (how much stays visible)
- [ ] Add `accel` / `decel` (movement curves)
- [x] Add `dmg` (damage when blocking)
- [x] Add `health` (shootable door)
- [x] Add `sounds` (sound set 0-4)
- [x] Add `wait` (auto-close delay)
- [x] Parse spawnflags: TOGGLE, START_OPEN, CRUSHER, NOMONSTER, ANIMATED
- [x] Test: All door types work correctly

## trigger_multiple
- **File**: `packages/game/src/entities/triggers.ts`
- **Source**: `../rerelease/g_trigger.cpp` SP_trigger_multiple
- [ ] Add `sounds` field (sound sets 1-4)
- [ ] Add sound precaching/playback
- [ ] Add `message` field (centerprint text)
- [ ] Parse LATCHED spawnflag (area query)
- [ ] Parse CLIP spawnflag
- [ ] Test: Trigger plays sounds, shows messages

## Trace System Verification
- **File**: `packages/shared/src/bsp/collision.ts`
- **Source**: `../rerelease/qcommon/cm_trace.c`
- [ ] Verify signed bbox offset handling (CM_ClipBoxToBrush)
- [ ] Verify startsolid detection matches original
- [ ] Compare PlaneDistance calculations against C code
- [ ] Test: Edge cases (starting in solid, grazing edges)

## Lightmap Animation
- **File**: `packages/engine/src/render/bsp/renderer.ts`
- **Source**: `../rerelease/ref_gl` (renderer)
- **Status**: Marked "skipped pending fixes"
- [ ] Implement multi-style lightmap animation
- [ ] Support flickering/pulsing lights
- [ ] Test: Maps with animated lights look correct

## View Kick Effects
- **File**: `packages/client/src/view-effects.ts`
- **Source**: `../rerelease/p_weapon.cpp:83-89` P_AddWeaponKick
- [ ] Add kick duration timing (200ms)
- [ ] Implement kick interpolation (P_CurrentKickFactor)
- [ ] Add kick origin offset (weapon pushback)
- [ ] Scale with quad damage
- [ ] Test: Weapon kick feels impactful

## Armor System
- **File**: `packages/game/src/combat/damage.ts`
- **Source**: `../rerelease/g_combat.cpp:94-203` CheckArmor
- [ ] Add power screen cell consumption + angle checking
- [ ] Add power shield cell consumption
- [ ] Implement armor type switching (keep better armor)
- [ ] Add shard accumulation logic
- [ ] Test: Power armor works correctly
