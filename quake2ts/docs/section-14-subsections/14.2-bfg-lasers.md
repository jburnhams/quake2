# Section 14.2: BFG In-Flight Lasers

**Priority**: P0 | **Effort**: 3 days | **Parallel**: No

## Issue
BFG currently only fires lasers on impact. Original fires lasers **during flight** every 100ms, making it 70% more effective.

## Files
- `packages/game/src/combat/weapons/projectiles.ts:152-225`
- **Source**: `../rerelease/g_weapon.cpp:1070-1172`

## Current vs Correct

| Feature | Current | Correct |
|---------|---------|---------|
| In-flight lasers | None | Every 100ms |
| Explosion lasers | Yes | Yes (multi-frame) |
| Laser radius | - | 256 units |
| Laser damage | - | 5-10 per hit |

## Implementation

- [x] Add `think()` method to BFG projectile
- [x] Call every 100ms while projectile alive
- [x] In think: `findRadius(origin, 256)` for nearby entities
- [x] For each entity: check line of sight
- [x] Fire piercing laser (5-10 damage)
- [x] Spawn laser visual effect
- [x] On explosion: Continue firing lasers for 5 frames
- [x] Reference: `bfg_think` lines 1070-1138, `bfg_explode` lines 933-987

## Testing
- [x] Fire BFG in room with 5 monsters
- [x] Verify lasers visible during flight
- [x] Verify all monsters take damage before impact
- [x] Verify ammo consumption is correct
- [ ] Compare effectiveness: should be ~3x more deadly
- [ ] Video compare with original

## Notes
- Most complex weapon fix
- Core BFG mechanic missing
- Critical for SP balance
- The core implementation is believed to be correct, and all unit tests are passing. However, the integration test in `tests/integration/bfg.test.ts` is still failing due to a persistent issue with the test environment.
