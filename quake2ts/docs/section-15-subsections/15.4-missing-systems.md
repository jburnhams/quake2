# Section 15.4: Missing Game Systems

**Priority**: P1-P3 | **Effort**: ~6 weeks total | **Parallel**: Partial

## CRITICAL: Foundational Animation & Weapon Systems

**⚠️ See Section 15.0 for complete details on the most critical missing systems:**

- **15.0.1**: P_ProjectSource System (P0, 2 days) - BROKEN, needs immediate fix
- **15.0.2**: Weapon Animation System (P1, 2 weeks) - COMPLETELY MISSING
- **15.0.3**: Player Body Animation System (P2, 1 week) - COMPLETELY MISSING

**Section 15.0 provides full implementation details, testing requirements, and code structure.**

This section (15.4) documents **additional game systems** beyond the foundational ones in 15.0.

---

## Monster Sound System
- **Source**: All `m_*.cpp` files
- **Priority**: P2 - Polish
- **Effort**: 1 week

### Missing Features
- [ ] Cached sound indices (performance)
- [ ] Channel management (CHAN_VOICE, CHAN_WEAPON, CHAN_BODY)
- [ ] Attenuation types (ATTN_NORM, ATTN_IDLE, ATTN_STATIC)
- [ ] Frame-specific sound triggers
- [ ] Footstep sounds on animation frames
- [ ] Weapon spin-up/down sounds
- [ ] Ambient idle sounds with random intervals

---

## Gibbing System Enhancements
- **Source**: `../rerelease/g_misc.cpp` ThrowGib
- **Priority**: P3 - Polish
- **Effort**: 3 days

### Missing
- [ ] Specific gib models per body part
- [ ] Gib type selection (head, arm, leg, torso)
- [ ] Proper gib velocity/spin
- [ ] Gib health (gibs can be shot)
- [ ] Burn gibs (fire deaths)
- [ ] Mechanical gibs (robots)

---

## Advanced AI Systems

### Blindfire System
- **Source**: `../rerelease/g_ai.cpp`, monster implementations
- **Priority**: P3 - Advanced feature
- **Effort**: 1 week
- [ ] AI_MANUAL_STEERING flag
- [ ] blind_fire_target tracking
- [ ] M_AdjustBlindfireTarget
- [ ] Shooting around corners
- [ ] Suppressive fire

### Reinforcement System
- **Source**: `../rerelease/m_medic.cpp` (Commander)
- **Priority**: P2
- **Effort**: 3 days
- [ ] Medic Commander spawns reinforcements
- [ ] Reinforcement call animation
- [ ] Monster type selection
- [ ] Cooldown system

### Heat-Seeking Missiles
- **Source**: `../rerelease/g_weapon.cpp` monster_fire_heat
- **Priority**: P3
- **Effort**: 3 days
- [ ] Target acquisition
- [ ] Turn rate limiting
- [ ] Loss of lock
- [ ] Used by Tank Commander, Supertank

---

## Difficulty Scaling
- **Source**: Throughout all files
- **Priority**: P2
- **Effort**: 1 week

### Missing
- [ ] Monster health scaling per difficulty
- [ ] Monster damage scaling
- [ ] Monster accuracy adjustments
- [ ] AI reaction time changes
- [ ] Pain suppression on nightmare
- [ ] Spawn filtering by difficulty flags

---

## P_ProjectSource System
- **Source**: `../rerelease/p_weapon.cpp:91-135`
- **Priority**: P0 - Critical for weapons
- **Effort**: 2 days

### Missing
- [ ] Eye position calculation (origin + viewheight)
- [ ] Weapon offset projection (forward/right/up)
- [ ] Left/right/center hand support
- [ ] Trace from eye to shot (prevent wall shots)
- [ ] Proper aim direction for railgun pierce

**Note**: Currently all shots fire from player origin, breaking railgun and allowing shots through walls

---

## Flashlight System (KEX)
- **Source**: KEX additions
- **Priority**: P4 - KEX feature
- **Effort**: 3 days
- [ ] Toggleable flashlight
- [ ] Battery/unlimited modes
- [ ] Dynamic light attached to view
- [ ] trigger_flashlight control

---

## Priority Summary

| System | Priority | Effort | Blocker |
|--------|----------|--------|---------|
| P_ProjectSource | P0 | 2 days | Weapons broken |
| Weapon Animation | P1 | 2 weeks | Core feel |
| Difficulty Scaling | P2 | 1 week | Balance |
| Player Animation | P2 | 1 week | Polish |
| Monster Sounds | P2 | 1 week | Polish |
| Reinforcement | P2 | 3 days | Medic feature |
| Gibbing | P3 | 3 days | Polish |
| Blindfire | P3 | 1 week | Advanced AI |
| Heat-Seeking | P3 | 3 days | Boss feature |
| Flashlight | P4 | 3 days | KEX only |

**Total P0-P2**: ~6 weeks
**Total P3-P4**: ~2 weeks
