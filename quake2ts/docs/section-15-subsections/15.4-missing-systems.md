# Section 15.4: Missing Game Systems

**Priority**: P1-P3 | **Effort**: ~6 weeks total | **Parallel**: Partial

## CRITICAL: Foundational Animation & Weapon Systems

**⚠️ See Section 15.0 for complete details on the most critical missing systems:**

- **15.0.1**: P_ProjectSource System (P0) - [x] **COMPLETED** (See 15.0)
- **15.0.2**: Weapon Animation System (P1) - [x] **COMPLETED** (See 15.0)
- **15.0.3**: Player Body Animation System (P2) - [x] **COMPLETED** (See 15.0)

**Section 15.0 provides full implementation details, testing requirements, and code structure.**

This section (15.4) documents **additional game systems** beyond the foundational ones in 15.0.

---

## Monster Sound System
- **Source**: All `m_*.cpp` files
- **Priority**: P2 - Polish
- **Effort**: 1 week

### Missing Features
- [x] Cached sound indices (performance) - *Implemented via `soundIndex` pre-caching in monsters*
- [x] Channel management (CHAN_VOICE, CHAN_WEAPON, CHAN_BODY) - *Consolidated in shared/audio/constants.ts*
- [x] Attenuation types (ATTN_NORM, ATTN_IDLE, ATTN_STATIC) - *Consolidated in shared/audio/constants.ts*
- [x] Frame-specific sound triggers - *Supported via frame `think` callbacks*
- [x] Footstep sounds on animation frames - *Implemented in Arachnid*
- [ ] Weapon spin-up/down sounds - *To be implemented in specific monsters (e.g. Gunner)*
- [ ] Ambient idle sounds with random intervals - *To be implemented in specific monsters*

---

## Gibbing System Enhancements
- **Source**: `../rerelease/g_misc.cpp` ThrowGib
- **Priority**: P3 - Polish
- **Effort**: 3 days

### Missing
- [x] Specific gib models per body part
- [x] Gib type selection (head, arm, leg, torso)
- [x] Proper gib velocity/spin
- [x] Gib health (gibs can be shot)
- [ ] Burn gibs (fire deaths)
- [x] Mechanical gibs (robots) - *Implemented for Tank and Gunner*

---

## Advanced AI Systems

### Blindfire System
- **Source**: `../rerelease/g_ai.cpp`, monster implementations
- **Priority**: P3 - Advanced feature
- **Effort**: 1 week
- [ ] AI_MANUAL_STEERING flag
- [ ] blind_fire_target tracking
- [ ] M_AdjustBlindfireTarget
- [ ] Shooting around corners
- [ ] Suppressive fire

### Reinforcement System
- **Source**: `../rerelease/m_medic.cpp` (Commander)
- **Priority**: P2
- **Effort**: 3 days
- [ ] Medic Commander spawns reinforcements
- [ ] Reinforcement call animation
- [ ] Monster type selection
- [ ] Cooldown system

### Heat-Seeking Missiles
- **Source**: `../rerelease/g_weapon.cpp` monster_fire_heat
- **Priority**: P3
- **Effort**: 3 days
- [ ] Target acquisition
- [ ] Turn rate limiting
- [ ] Loss of lock
- [ ] Used by Tank Commander, Supertank

---

## Difficulty Scaling
- **Source**: Throughout all files
- **Priority**: P2
- **Effort**: 1 week

### Missing
- [ ] Monster health scaling per difficulty
- [ ] Monster damage scaling
- [ ] Monster accuracy adjustments
- [ ] AI reaction time changes
- [x] Pain suppression on nightmare - *Implemented in M_ShouldReactToPain check in common.ts*
- [x] Spawn filtering by difficulty flags

---

## Flashlight System (KEX)
- **Source**: KEX additions
- **Priority**: P4 - KEX feature
- **Effort**: 3 days
- [ ] Toggleable flashlight
- [ ] Battery/unlimited modes
- [ ] Dynamic light attached to view
- [ ] trigger_flashlight control

---

## Priority Summary

| System | Priority | Effort | Status |
|--------|----------|--------|---------|
| P_ProjectSource | P0 | 2 days | **DONE** (15.0) |
| Weapon Animation | P1 | 2 weeks | **DONE** (15.0) |
| Difficulty Scaling | P2 | 1 week | **IN PROGRESS** |
| Player Animation | P2 | 1 week | **DONE** (15.0) |
| Monster Sounds | P2 | 1 week | **IN PROGRESS** |
| Reinforcement | P2 | 3 days | Medic feature |
| Gibbing | P3 | 3 days | **IN PROGRESS** |
| Blindfire | P3 | 1 week | Advanced AI |
| Heat-Seeking | P3 | 3 days | Boss feature |
| Flashlight | P4 | 3 days | KEX only |
