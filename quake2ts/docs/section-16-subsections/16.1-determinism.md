# Section 16.1: Determinism Violations

**Priority**: P0 - **CRITICAL** | **Effort**: 2-3 days | **Parallel**: Yes

## Issue
18+ files use `Math.random()` → breaks save/load, testing, future multiplayer.

## Affected Files

**Monster AI** (15):
- [ ] `monsters/flyer.ts:96`
- [ ] `monsters/attack.ts:11`
- [ ] `monsters/parasite.ts:42`
- [ ] `monsters/jorg.ts:90,108,161,166,178`
- [ ] `monsters/mutant.ts:41`
- [ ] `monsters/chick.ts:42`
- [ ] `monsters/soldier.ts:307,333`
- [ ] `monsters/flipper.ts:31`
- [ ] `monsters/makron.ts:90,197,208`
- [ ] `monsters/boss2.ts:91,103,147`
- [ ] `monsters/brain.ts:33`
- [ ] `monsters/tank.ts:91,97,297`
- [ ] `monsters/gunner.ts:75,119,239`
- [ ] `monsters/supertank.ts:131,195,209`
- [ ] `monsters/medic.ts:151`

**Utilities** (2):
- [ ] `entities/utils.ts:57-59`
- [ ] `engine/render/particleSystem.ts:65`

**Placeholder helpers** (delete these):
```typescript
// Helper to access deterministic RNG or Math.random
const random = () => Math.random();  // WRONG
```

## Replacement Pattern

| Current | Replace With |
|---------|-------------|
| `Math.random()` | `game.random.frandom()` |
| `Math.random() - 0.5` | `game.random.crandom() / 2` |
| `(Math.random() - 0.5) * 2` | `game.random.crandom()` |
| `Math.floor(Math.random() * N)` | `game.random.irandom(0, N-1)` |

## Fix Process
- [ ] Add `game: GameState` parameter to functions using random
- [ ] Replace all `Math.random()` calls
- [ ] Update all callers to pass `game`
- [ ] Delete placeholder `random()` helpers
- [ ] Special case: ParticleSystem constructor needs `RandomGenerator` parameter

## Verification
```bash
# Must return ZERO results:
grep -r "Math\.random" packages/game/src packages/shared/src
```

## Testing
- [ ] 10 runs with seed 12345 produce identical state hashes
- [ ] Save at frame 1000, load, continue → identical to not saving
- [ ] All monster AI tests pass

**Source**: `../rerelease` uses MersenneTwister for deterministic RNG
